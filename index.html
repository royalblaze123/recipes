<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Atlas Recipe Index</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" sizes="515x512" href="./favicon-512.png">
  <link rel="shortcut icon" type="image/png" href="./favicon-512.png">
  <style>
    :root {
      --bg: #0b0c10;
      --card: #151821;
      --accent: #20c997;
      --accent-soft: rgba(32,201,151,0.16);
      --text: #f8f9fa;
      --muted: #9ca3af;
      --border: #272b38;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #111827 0, #020617 55%, #000 100%);
      color: var(--text);
      padding: 16px;
    }
    .shell {
      max-width: 900px;
      margin: 0 auto;
    }
    header {
      margin-bottom: 16px;
    }
    h1 {
      font-size: 1.4rem;
      margin: 0 0 4px;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--accent);
    }
    .subtitle {
      font-size: 0.85rem;
      color: var(--muted);
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 12px 0 16px;
    }
    .controls input,
    .controls select,
    .controls button {
      font-size: 0.9rem;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #020617;
      color: var(--text);
      padding: 6px 12px;
      outline: none;
    }
    .controls input::placeholder {
      color: #6b7280;
    }
    .controls button {
      background: linear-gradient(135deg, var(--accent), #14b8a6);
      border: none;
      cursor: pointer;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }
    .controls button.secondary {
      background: transparent;
      border-color: var(--accent-soft);
      color: var(--accent);
    }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      padding: 2px 9px;
      border-radius: 999px;
      border: 1px solid var(--accent-soft);
      color: var(--accent);
      background: rgba(15,23,42,0.85);
    }
    .list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .card {
      background: linear-gradient(135deg, rgba(15,23,42,0.98), rgba(15,23,42,0.94));
      border: 1px solid rgba(55,65,81,0.7);
      border-radius: 10px;
      padding: 10px 12px;
      display: flex;
      align-items: flex-start;
      gap: 10px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.5);
      transition: transform 0.12s ease, box-shadow 0.12s ease, border-color 0.12s ease;
    }
    .card:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 30px rgba(0,0,0,0.65);
      border-color: var(--accent-soft);
    }
    .card-main {
      flex: 1;
      min-width: 0;
    }
    .card-title-row {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 2px;
    }
    .card-title-row a {
      color: var(--text);
      text-decoration: none;
      font-size: 0.95rem;
      font-weight: 600;
    }
    .card-title-row a:hover {
      text-decoration: underline;
      color: #e5e7eb;
    }
    .filename {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.7rem;
      color: var(--muted);
      margin-top: 2px;
      opacity: 0.8;
      word-break: break-all;
    }
    .meta-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
    }
    .tag {
      font-size: 0.7rem;
      padding: 2px 7px;
      border-radius: 999px;
      background: rgba(31,41,55,0.9);
      color: #d1d5db;
    }
    .uploaded {
      font-size: 0.72rem;
      color: #22c55e;
      font-weight: 600;
    }
    .side {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 4px;
      min-width: 90px;
    }
    .side label {
      font-size: 0.7rem;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 4px;
      cursor: pointer;
      user-select: none;
    }
    .side input[type="checkbox"] {
      accent-color: var(--accent);
      width: 14px;
      height: 14px;
      margin: 0;
    }
    .count {
      font-size: 0.75rem;
      color: var(--muted);
      margin-bottom: 4px;
    }
    @media (max-width: 640px) {
      body { padding: 12px; }
      .shell { max-width: 100%; }
      .side { min-width: auto; align-items: flex-start; }
      .card { flex-direction: column-reverse; }
    }
  </style>
</head>
<body>
  <div class="shell">
    <header>
      <h1>Atlas Recipe Index</h1>
      <div class="subtitle">
        GitHub-ready auto index. Use this page to open recipes, track what’s uploaded to AnyList, and export a master list for duplicate checks.
      </div>
    </header>

    <div class="controls">
      <input id="searchBox" type="search" placeholder="Search recipes (name, group, tags)..." oninput="renderList()">
      <select id="groupFilter" onchange="renderList()">
        <option value="">All groups</option>
        <option value="Lunch">Lunch</option>
      </select>
      <button type="button" onclick="exportTxt()">Download .txt index</button>
      <button type="button" class="secondary" onclick="clearUploaded()">Clear uploaded marks</button>
    </div>

    <div class="count" id="countRow"></div>

    <div class="list" id="recipeList"></div>
  </div>

  <script>
    const recipes = [
      {
        id: "lunch-chicken-brown-rice-bowl",
        title: "Chicken Brown Rice Bowl",
        filename: "lunch-chicken-brown-rice-bowl.html",
        group: "Lunch",
        tags: ["bowl","chicken","rice","microwave"]
      },
      {
        id: "lunch-turkey-cheddar-wrap",
        title: "Turkey Cheddar Grab-and-Go Wrap",
        filename: "lunch-turkey-cheddar-wrap.html",
        group: "Lunch",
        tags: ["wrap","turkey","grab-and-go"]
      },
      {
        id: "lunch-salmon-veggie-bowl",
        title: "Salmon Quinoa Veggie Bowl",
        filename: "lunch-salmon-veggie-bowl.html",
        group: "Lunch",
        tags: ["salmon","quinoa","bowl"]
      },
      {
        id: "lunch-chicken-caesar-wrap",
        title: "Chicken Caesar Lunch Wrap",
        filename: "lunch-chicken-caesar-wrap.html",
        group: "Lunch",
        tags: ["wrap","chicken","caesar"]
      },
      {
        id: "lunch-beef-veggie-rice-bowl",
        title: "Lean Beef Veggie Rice Bowl",
        filename: "lunch-beef-veggie-rice-bowl.html",
        group: "Lunch",
        tags: ["beef","rice","veggies","bowl"]
      },
      {
        id: "lunch-tuna-protein-pasta",
        title: "Tuna Protein Pasta Lunch",
        filename: "lunch-tuna-protein-pasta.html",
        group: "Lunch",
        tags: ["tuna","pasta","high-protein"]
      },
      {
        id: "lunch-chicken-sweet-potato-bowl",
        title: "Chicken Sweet Potato Power Bowl",
        filename: "lunch-chicken-sweet-potato-bowl.html",
        group: "Lunch",
        tags: ["chicken","sweet potato","bowl"]
      }
    ];

    const STORAGE_KEY = "atlas_recipe_uploaded_v1";

    function getUploadedMap() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        return raw ? JSON.parse(raw) : {};
      } catch (e) {
        return {};
      }
    }

    function setUploadedMap(map) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(map));
    }

    function toggleUploaded(id, checked) {
      const map = getUploadedMap();
      map[id] = !!checked;
      setUploadedMap(map);
      renderList();
    }

    function clearUploaded() {
      localStorage.removeItem(STORAGE_KEY);
      renderList();
    }

    function renderList() {
      const listEl = document.getElementById("recipeList");
      const search = document.getElementById("searchBox").value.trim().toLowerCase();
      const groupFilter = document.getElementById("groupFilter").value;
      const uploadedMap = getUploadedMap();

      listEl.innerHTML = "";

      let filtered = recipes.filter(r => {
        if (groupFilter && r.group !== groupFilter) return false;
        if (!search) return true;
        const haystack = (r.title + " " + r.group + " " + r.tags.join(" ")).toLowerCase();
        return haystack.includes(search);
      });

      const countRow = document.getElementById("countRow");
      const uploadedCount = recipes.filter(r => uploadedMap[r.id]).length;
      countRow.textContent = `${filtered.length} recipes shown • ${uploadedCount} marked as uploaded`;

      if (!filtered.length) {
        const div = document.createElement("div");
        div.className = "subtitle";
        div.textContent = "No recipes match your filters.";
        listEl.appendChild(div);
        return;
      }

      filtered.forEach(r => {
        const card = document.createElement("div");
        card.className = "card";

        const main = document.createElement("div");
        main.className = "card-main";

        const titleRow = document.createElement("div");
        titleRow.className = "card-title-row";

        const link = document.createElement("a");
        link.href = r.filename;
        link.target = "_blank";
        link.rel = "noopener noreferrer";
        link.textContent = r.title;

        const pill = document.createElement("span");
        pill.className = "pill";
        pill.textContent = r.group;

        titleRow.appendChild(link);
        titleRow.appendChild(pill);

        const filename = document.createElement("div");
        filename.className = "filename";
        filename.textContent = r.filename;

        const metaRow = document.createElement("div");
        metaRow.className = "meta-row";

        r.tags.forEach(t => {
          const tag = document.createElement("span");
          tag.className = "tag";
          tag.textContent = t;
          metaRow.appendChild(tag);
        });

        if (uploadedMap[r.id]) {
          const up = document.createElement("span");
          up.className = "uploaded";
          up.textContent = "Uploaded to AnyList";
          metaRow.appendChild(up);
        }

        main.appendChild(titleRow);
        main.appendChild(filename);
        main.appendChild(metaRow);

        const side = document.createElement("div");
        side.className = "side";

        const label = document.createElement("label");
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.checked = !!uploadedMap[r.id];
        checkbox.addEventListener("change", () => toggleUploaded(r.id, checkbox.checked));
        label.appendChild(checkbox);
        const span = document.createElement("span");
        span.textContent = "Uploaded";
        label.appendChild(span);

        side.appendChild(label);

        card.appendChild(main);
        card.appendChild(side);

        listEl.appendChild(card);
      });
    }

    function exportTxt() {
      const uploadedMap = getUploadedMap();
      const lines = recipes.map(r => {
        const uploaded = uploadedMap[r.id] ? "uploaded" : "not_uploaded";
        return `${r.filename}	${r.title}	${r.group}	${uploaded}`;
      });
      const blob = new Blob([lines.join("\n") + "\n"], { type: "text/plain" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "recipes-index.txt";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    document.addEventListener("DOMContentLoaded", renderList);
  </script>
</body>
</html>





